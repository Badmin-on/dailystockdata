# 🔧 자동 데이터 수집 설정 체크리스트

## ✅ 5분 안에 완료하기

---

## 1️⃣ Vercel 배포 확인

- [ ] **Vercel Dashboard 접속**
  - https://vercel.com/dashboard

- [ ] **프로젝트 배포 상태 확인**
  - 최신 커밋이 배포되었는지 확인
  - 배포 안 되었으면: "Redeploy" 클릭

- [ ] **배포된 URL 확인**
  - `https://your-project.vercel.app` 접속
  - 웹사이트가 정상 작동하는지 확인

---

## 2️⃣ 환경 변수 확인 (중요!)

**Settings → Environment Variables**

### 필수 변수 4개:

- [ ] `NEXT_PUBLIC_SUPABASE_URL`
  ```
  https://gakqqmhubnbswqmnpprv.supabase.co
  ```

- [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY`
  ```
  eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdha3FxbWh1Ym5ic3dxbW5wcHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NDk5MjQsImV4cCI6MjA3NTMyNTkyNH0.6gbpDu1ILzcSvcz__n8kOxreueX0_MCjwJDCBQA70oY
  ```

- [ ] `SUPABASE_SERVICE_KEY`
  ```
  eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdha3FxbWh1Ym5ic3dxbW5wcHJ2Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1OTc0OTkyNCwiZXhwIjoyMDc1MzI1OTI0fQ.sIUxTApR43oGxUb8my3Ao8aza7RTLRUvJS-c7DQZnvI
  ```

- [ ] `CRON_SECRET`
  ```
  a8f4c2d1b9e7f6a3c5d8e2b4f7a9c1d3e5f8a2b6c9d4e7f1a3b8c5d9e2f6a4b7
  ```

### 설정 방법:
1. "Add New" 클릭
2. Key 입력
3. Value 붙여넣기
4. Environment: **모두 선택** (Production, Preview, Development)
5. "Save" 클릭

---

## 3️⃣ Cron Job 활성화 확인

**Settings → Cron Jobs**

### 2개의 Cron Job 확인:

- [ ] **재무 데이터 수집**
  - Path: `/api/collect-data`
  - Schedule: `0 14 * * *` (매일 23:00 KST)
  - Status: **Enabled** ✅

- [ ] **주가 데이터 수집**
  - Path: `/api/collect-daily-prices`
  - Schedule: `0 11 * * 1-5` (평일 20:00 KST)
  - Status: **Enabled** ✅

### 없거나 Disabled이면:
- 최신 커밋 재배포 필요
- `vercel.json` 파일이 있는지 확인

---

## 4️⃣ 수동 테스트 (선택사항)

### 브라우저에서 직접 실행:

**재무 데이터 수집:**
```
https://your-project.vercel.app/api/collect-data?secret=a8f4c2d1b9e7f6a3c5d8e2b4f7a9c1d3e5f8a2b6c9d4e7f1a3b8c5d9e2f6a4b7
```

**주가 데이터 수집:**
```
https://your-project.vercel.app/api/collect-daily-prices?secret=a8f4c2d1b9e7f6a3c5d8e2b4f7a9c1d3e5f8a2b6c9d4e7f1a3b8c5d9e2f6a4b7
```

### 예상 결과:
```json
{
  "success": true,
  "message": "Data collection completed",
  "stats": {
    "companies": 844,
    "duration": "25 minutes"
  }
}
```

---

## 5️⃣ Supabase 데이터 확인

**Supabase SQL Editor에서:**

```sql
-- 최근 수집된 데이터 확인
SELECT 
  scrape_date,
  COUNT(DISTINCT company_id) as companies,
  COUNT(*) as records
FROM financial_data
GROUP BY scrape_date
ORDER BY scrape_date DESC
LIMIT 5;
```

**예상 결과:**
```
scrape_date | companies | records
2025-10-25  | 844       | 3376
2025-10-24  | 847       | 3388
...
```

---

## 6️⃣ 웹사이트 확인

**투자 기회 발견 페이지:**
```
https://your-project.vercel.app/investment-finder
```

### 확인 사항:
- [ ] 페이지가 로드되는가?
- [ ] 기업 목록이 표시되는가?
- [ ] 점수가 다양한가? (0, 20, 40, 60, 80, 100)
- [ ] 증감률이 현실적인가? (-10% ~ +20%)
- [ ] 필터가 작동하는가?
- [ ] "마지막 업데이트" 날짜가 최신인가?

---

## 🎯 완료!

### 모든 체크리스트 완료하면:

✅ **오늘부터 자동 수집 시작!**

- 평일 20:00 - 주가 데이터 수집
- 매일 23:00 - 재무 데이터 수집

✅ **아무것도 하지 않아도 매일 업데이트!**

✅ **언제든 웹사이트 접속해서 최신 투자 기회 확인!**

---

## 📊 데이터 수집 일정

| 요일 | 20:00 (주가) | 23:00 (재무) |
|------|-------------|-------------|
| 월 | ✅ | ✅ |
| 화 | ✅ | ✅ |
| 수 | ✅ | ✅ |
| 목 | ✅ | ✅ |
| 금 | ✅ | ✅ |
| 토 | - | ✅ |
| 일 | - | ✅ |

---

## 🔍 모니터링

### Vercel Logs 확인:
1. **Vercel Dashboard → 프로젝트 → Logs**
2. **Function 필터 선택**
3. **검색:** `/api/collect-data` 또는 `/api/collect-daily-prices`

### 성공 로그 예시:
```
[INFO] Starting data collection...
[INFO] Collected 844 companies
[INFO] Financial data saved to Supabase
[INFO] Collection completed in 25 minutes
```

---

## 🆘 문제 해결

### ❌ Cron Job이 없어요!
→ 최신 커밋 재배포

### ❌ 환경 변수가 없어요!
→ 위의 4개 변수 추가 후 재배포

### ❌ API가 404 에러!
→ 배포 확인 및 재배포

### ❌ 데이터가 수집 안 돼요!
→ 수동 테스트 실행 후 에러 확인

---

## ⏰ 첫 자동 수집

**오늘 설정 완료하면:**
- **오늘 밤 23:00** - 첫 재무 데이터 수집
- **내일 20:00** (평일이면) - 첫 주가 데이터 수집

**내일 아침 확인:**
```
https://your-project.vercel.app/investment-finder
```

새로운 데이터가 추가되었는지 확인!

---

## 🎉 성공!

모든 체크리스트를 완료하셨다면:

**🎊 축하합니다! 완전 자동화 완료!**

**이제 매일 자동으로 데이터가 수집되고, 투자 기회가 업데이트됩니다!**

**당신은 그냥 웹사이트에 접속해서 결과를 확인하면 됩니다!** 🚀

---

**예상 소요 시간:** 5-10분  
**난이도:** 쉬움 ⭐  
**효과:** 평생 자동화! 🤖
